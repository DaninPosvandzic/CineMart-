<!-- src/app/pages/auth/login/login.component.html -->
<div class="auth-page">
  <!-- Background -->
  <div class="auth-bg">
    <div class="glow glow-red"></div>
    <div class="glow glow-gold"></div>
  </div>

  <!-- Card -->
  <mat-card class="auth-card mat-elevation-z12">
    <!-- Header -->
    <div class="auth-header">
      <div class="logo">
        üé¨
      </div>
      <h1 class="title">CineMart</h1>
      <p class="subtitle">Prijavite se na svoj nalog</p>
    </div>

    <mat-card-content>
      <!-- Error -->
      <div *ngIf="errorMessage" class="error-box">
        <mat-icon>error_outline</mat-icon>
        <span>{{ errorMessage }}</span>
      </div>

      <form [formGroup]="form" (ngSubmit)="onSubmit()">
        <!-- Email -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput formControlName="email" type="email" />
          <mat-icon matPrefix>mail</mat-icon>

          <mat-error *ngIf="form.get('email')?.hasError('required')">
            Email je obavezan
          </mat-error>
          <mat-error *ngIf="form.get('email')?.hasError('email')">
            Unesite validan email
          </mat-error>
        </mat-form-field>

        <!-- Password -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Lozinka</mat-label>
          <input
            matInput
            formControlName="password"
            [type]="hidePassword ? 'password' : 'text'"
          />
          <mat-icon matPrefix>lock</mat-icon>

          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="hidePassword = !hidePassword"
          >
            <mat-icon>
              {{ hidePassword ? 'visibility_off' : 'visibility' }}
            </mat-icon>
          </button>

          <mat-error *ngIf="form.get('password')?.hasError('required')">
            Lozinka je obavezna
          </mat-error>
        </mat-form-field>

        <!-- Remember / Forgot -->
        <div class="form-row">
          <mat-checkbox formControlName="rememberMe">
            Zapamti me
          </mat-checkbox>

          <a routerLink="/auth/forgot-password" class="link">
            Zaboravili ste lozinku?
          </a>
        </div>

        <!-- Submit -->
        <button
          mat-raised-button
          color="primary"
          class="login-btn"
          type="submit"
          [disabled]="form.invalid || isLoading"
        >
          <ng-container *ngIf="!isLoading; else loading">
            <mat-icon>login</mat-icon>
            Prijava
          </ng-container>

          <ng-template #loading>
            <mat-progress-spinner
              diameter="20"
              mode="indeterminate"
            ></mat-progress-spinner>
            <span>Prijava...</span>
          </ng-template>
        </button>

        <!-- Divider -->
        <div class="divider">
          <span>ili</span>
        </div>

        <!-- Register -->
        <div class="register">
          <span>Nemate nalog?</span>
          <a routerLink="/auth/register" class="link">
            Registrujte se
          </a>
        </div>
      </form>
    </mat-card-content>

    <!-- Footer -->
    <div class="auth-footer">
      <a routerLink="/" class="back-link">
        <mat-icon>arrow_back</mat-icon>
        Nazad na poƒçetnu
      </a>
    </div>
  </mat-card>
</div>
